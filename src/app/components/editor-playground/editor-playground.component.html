<div
  class="ls-visor"
  #visor
  (dblclick)="unSelectElement()"
  aorPanZoomVisor
  [panZoomCanvas]="map"
  [options]="visorOptions"
  [visorMaxWidth]="canvasOptions.width"
  (zoomLevelChanged)="updateZoomLevel($event)">
  <div
    id="map"
    class="canvas"
    #map
    aorResizeContainer
    aorPanZoomCanvas
    [canvasHeight]="canvasOptions.height"
    [canvasWidth]="canvasOptions.width">
    @for (element of mapObjects; track $index) {
      <aor-map-object
        aorResizeElement
        cdkDrag
        [containerHeight]="element | resizeContainerHeight"
        [containerWidth]="element | resizeContainerWidth"
        [keepRatio]="element.keepRatio"
        [zoomLevel]="zoomLevel"
        (click)="selectElement(element.id); $event.stopPropagation()"
        (cdkDragMoved)="onDragMapObject($event, element)"
        (cdkDragStarted)="onDragStartMapObject($event, element)"
        cdkDragBoundary=".canvas"
        class="panzoom-exclude"
        [ngClass]="{ selected: isElementSelected(element.id) }"
        [ngStyle]="{
          transform: 'translate(' + element.position.x + 'px, ' + element.position.y + 'px)',
          'transform-origin': 'center',
          'z-index': element.zIndex
        }">
        <div
          aorReiszetContent
          class="box"
          [contentHeight]="element.size.height"
          [contentWidth]="element.size.width"
          [contentRotation]="element.rotation"
          [ngStyle]="{
            'background-color': element.backgroundColor,
            'border-radius': element.borderRadius + '%'
          }"></div>
      </aor-map-object>
    }
  </div>
</div>
